<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<script th:replace="fragments/header :: headElements"></script>
<script>
	$(function() {
		$('[data-toggle="popover"]').popover()
	});
</script>
<title>Oh my Gacha! - Probability Calculator</title>
</head>
<body>

   <div class="container" style="margin-top: 4em">

      <!--       Website Header -->
      <div class="row" style="text-align: center">
         <h3>Oh my Gacha! is a web tool that estimates how much
            money you could waste chasing after that precious drop!</h3>
      </div>
      <div class="row" style="justify-content: center; margin-top: 2em">
         <h5>What is this?</h5>
      </div>

      <form action="" method="post">
         <!--       Drop Chance  -->
         <div class="form-group row"
            style="justify-content: center; margin-top: 3em">
            <div class="col-6 col-md-4 col-lg-3">
               <label class="label">Drop chance (From 0-1)</label>
            </div>
            <div class="col-4 col-md-3 col-lg-2">
               <input type="text" th:field="${calculator.probability}"
                  class="form-control" required placeholder="0.0"
                  value="null" style="text-align: center">
            </div>
         </div>

         <!--       Cost per pull -->
         <div class="form-group row"
            style="justify-content: center; margin-top: 3em">
            <div class="col-6 col-md-4 col-lg-3">
               <label class="label">Cost per pull (Optional)</label> <a
                  data-toggle="popover" title="What does this mean?"
                  data-content="Enter the cost of 1 pull/summon, using the in-game currency."
                  class="btn fas fa-question-circle"
                  style="margin-left: 0.5em"></a>
            </div>
            <div class="col-4 col-md-3 col-lg-2">
               <input type="text" th:field="${calculator.pullCost}"
                  class="form-control" required placeholder="0"
                  style="text-align: center">
            </div>
         </div>

         <!--       Currency Conversion  -->
         <div class="form-group row"
            style="justify-content: center; margin-top: 3em">
            <div class="col-6 col-md-4 col-lg-3">
               <label class="label">Currency Conversion</label>
            </div>
            <div class="input-group col-2">
               <div class="input-group-prepend">
                  <span class="input-group-text" id="pound-sign">£</span>
               </div>
               <input type="text" th:field="${calculator.moneyIn}"
                  class="form-control" required placeholder="0"
                  aria-label="currency" aria-describedby="pound-sign"
                  style="text-align: right">
            </div>
            <div class="col-1">
               <span>gets you</span>
            </div>
            <div class="col-1">
               <input type="text" th:field="${calculator.currencyOut}"
                  class="form-control" required placeholder="0"
                  style="text-align: center">
            </div>
            <div class="col-2">
               <span>in-game currency</span>
            </div>
         </div>
         <div class="form-group row"
            style="justify-content: center; margin-top: 3em">
            <button type="submit" class="btn btn-primary">Calculate</button>
         </div>
      </form>
      
      <div class="card" th:if="${calculator.attempts != 0}">
         <div class="card-header" style="text-align: center">
            <h4>Results</h4>
         </div>
         <div class="card-body">
            <span>To reach a 99.99% chance of getting your desired item at least once, you need a total of</span>
            <span th:text="${calculator.attempts}" style="font-weight: bold"></span>
            <span>pulls</span>
            <br>
            <span>At a conversion rate of approximately</span>
            <span th:text="${#numbers.formatDecimal(calculator.moneyIn / calculator.currencyOut, 1, 4)}" style="font-weight: bold"></span>
            <span>GBP per 1 of the in-game currency, this would cost you approximately £</span>
            <span th:text="${calculator.totalCost}" style="font-weight: bold"></span>
         </div>
      </div>
</body>
</html>